<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sopa de Letras</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #2c7d63 0%, #15cc4c 100%);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
      }

      .container {
        background: white;
        border-radius: 12px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        padding: 30px;
        max-width: 1000px;
        width: 100%;
      }

      h1 {
        text-align: center;
        color: #333;
        margin-bottom: 30px;
        font-size: 2.5em;
      }

      .inicio {
        text-align: center;
        display: none;
      }

      .inicio input {
        padding: 12px 20px;
        font-size: 1em;
        border: 2px solid #667eea;
        border-radius: 6px;
        width: 100%;
        max-width: 300px;
        margin-bottom: 15px;
      }

      .inicio button {
        padding: 12px 40px;
        font-size: 1.1em;
        background: #667eea;
        color: white;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        transition: background 0.3s;
      }

      .inicio button:hover {
        background: #5568d3;
      }

      .juego {
        display: none;
      }

      .controles {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        gap: 20px;
        flex-wrap: wrap;
      }

      .info {
        display: flex;
        gap: 20px;
        align-items: center;
      }

      .info-item {
        font-size: 1.1em;
        color: #555;
      }

      .cronometro {
        font-weight: bold;
        color: #667eea;
        font-size: 1.3em;
      }

      .botones {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .botones button {
        padding: 10px 20px;
        font-size: 1em;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.3s;
        font-weight: 600;
      }

      .btn-validar {
        background: #3498db;
        color: white;
      }

      .btn-validar:hover:not(:disabled) {
        background: #2980b9;
        transform: scale(1.05);
      }

      .btn-validar:disabled {
        background: #bdc3c7;
        cursor: not-allowed;
        opacity: 0.6;
      }

      .btn-limpiar {
        background: #e74c3c;
        color: white;
      }

      .btn-limpiar:hover:not(:disabled) {
        background: #c0392b;
        transform: scale(1.05);
      }

      .btn-limpiar:disabled {
        background: #bdc3c7;
        cursor: not-allowed;
        opacity: 0.6;
      }

      .btn-resolver {
        background: #f39c12;
        color: white;
      }

      .btn-resolver:hover {
        background: #e67e22;
      }

      .btn-nueva {
        background: #27ae60;
        color: white;
      }

      .btn-nueva:hover {
        background: #229954;
      }

      #selectorDificultad {
  margin: 15px 0;
  text-align: center;
}

#selectorDificultad h3 {
  margin-bottom: 10px;
  font-size: 18px;
}

.btn-dif {
  padding: 10px 20px;
  margin: 5px;
  border: none;
  cursor: pointer;
  border-radius: 10px;
  font-size: 15px;
  font-weight: bold;
  transition: 0.2s;
  color: #333;
}

.btn-dif[data-dif="facil"] {
  background-color: #00C853; /* Verde ne√≥n / verde vivo */
  color: white;
}

.btn-dif[data-dif="medio"] {
  background-color: #FFD600; /* Amarillo fuerte */
  color: #333; /* Mejor contraste que blanco */
}

.btn-dif[data-dif="dificil"] {
  background-color: #D50000; /* Rojo fuerte e intenso */
  color: white;
}


.btn-dif.activa {
  outline: 3px solid #555;
  transform: scale(1.08);
}

      .info-seleccion {
        font-size: 0.95em;
        color: #667eea;
        font-weight: bold;
        background: #f0f4ff;
        padding: 8px 12px;
        border-radius: 6px;
        min-width: 150px;
        text-align: center;
        border: 2px solid #667eea;
      }

      .tablero-container {
        display: flex;
        gap: 30px;
        margin-top: 20px;
        flex-wrap: wrap;
      }

      .tablero {
        display: grid;
        gap: 2px;
        background: #ecf0f1;
        padding: 10px;
        border-radius: 8px;
      }

      .celda {
        width: 30px;
        height: 30px;
        display: flex;
        justify-content: center;
        align-items: center;
        background: white;
        border: 1px solid #bdc3c7;
        cursor: pointer;
        font-weight: bold;
        user-select: none;
        transition: all 0.2s;
        border-radius: 4px;
        font-size: 0.9em;
      }

      .celda:hover {
        background: #e8f4f8;
        border-color: #667eea;
        transform: scale(1.1);
      }

      .celda.seleccionada {
        background: #667eea;
        color: white;
        border-color: #667eea;
        box-shadow: 0 0 8px #667eea;
      }

      .celda.encontrada {
        background: #27ae60;
        color: white;
        border-color: #27ae60;
        box-shadow: 0 0 8px #27ae60;
      }

      .palabras-sidebar {
        display: flex;
        flex-direction: column;
        gap: 10px;
        min-width: 200px;
        max-height: 400px;
        overflow-y: auto;
      }

      .palabras-titulo {
        font-weight: bold;
        font-size: 1.1em;
        color: #333;
        margin-bottom: 10px;
      }

      .palabra-item {
        padding: 10px 12px;
        background: #ecf0f1;
        border-radius: 6px;
        font-size: 0.95em;
        color: #555;
        text-decoration: none;
        transition: all 0.3s;
        border: 2px solid transparent;
      }

      .palabra-item:hover {
        background: #bdc3c7;
        cursor: pointer;
        border: 2px solid #667eea;
      }

      .palabra-item.encontrada {
        background: #27ae60;
        color: white;
        text-decoration: line-through;
        border: 2px solid #27ae60;
      }

      .mensaje {
        padding: 15px;
        border-radius: 6px;
        margin-top: 15px;
        text-align: center;
        font-weight: bold;
        display: none;
        animation: slideIn 0.3s ease-out;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .mensaje.exito {
        background: #d4edda;
        color: #155724;
        border: 2px solid #28a745;
        display: block;
      }

      .mensaje.error {
        background: #f8d7da;
        color: #721c24;
        border: 2px solid #f5c6cb;
        display: block;
      }

      .instrucciones {
        background: #e7f3ff;
        border-left: 4px solid #3498db;
        padding: 15px;
        margin-top: 15px;
        border-radius: 6px;
        font-size: 0.95em;
        color: #333;
      }

      .instrucciones h3 {
        color: #3498db;
        margin-bottom: 10px;
      }

      @media (max-width: 768px) {
        .tablero {
          grid-template-columns: repeat(10, 25px);
        }

        .celda {
          width: 25px;
          height: 25px;
          font-size: 0.8em;
        }

        .tablero-container {
          flex-direction: column;
          gap: 20px;
        }

        .controles {
          flex-direction: column;
          align-items: flex-start;
        }

        .info {
          width: 100%;
          justify-content: space-between;
        }

        .botones {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üéÆ Sopa de Letras</h1>

      <!-- Pantalla inicial -->
      <div id="pantallaInicio" class="inicio" style="display: block">
        <h2 style="margin-bottom: 20px">Bienvenido al Juego</h2>
        <input
          type="text"
          id="nombreJugador"
          placeholder="Ingresa tu nombre"
          value="Jugador"
        />
        <button onclick="iniciarJuego()">‚ñ∂Ô∏è Iniciar Juego</button>

        <div id="selectorDificultad">
  <h3>Selecciona la dificultad:</h3>

  <button class="btn-dif" data-dif="facil">F√°cil</button>
  <button class="btn-dif" data-dif="medio">Medio</button>
  <button class="btn-dif" data-dif="dificil">Dif√≠cil</button>

  <!-- Guarda la dificultad elegida -->
  <input type="hidden" id="selectDificultad" value="medio">
</div>
<div class="instrucciones" style="margin-top: 30px">
          <h3>üìã C√≥mo jugar:</h3>
          <ul style="margin-left: 20px">
            <li>Haz clic en las letras para seleccionarlas en orden</li>
            <li>
              Las letras deben ser contiguas (horizontales, verticales o
              diagonales)
            </li>
            <li>Presiona "‚úì Validar" para enviar tu palabra al servidor</li>
            <li>
              Si es correcta, se mostrar√° en
              <span style="color: #27ae60; font-weight: bold">un color diferente</span>
            </li>
            <li>Usa "‚úï Limpiar" para borrar la selecci√≥n actual</li>
            <li>Presiona "üîì Resolver" para ver todas las respuestas</li>
          </ul>
        </div>
      </div>

      <!-- Pantalla de juego -->
      <div id="pantallaJuego" class="juego">
        <div class="controles">
          <div class="info">
            <div class="info-item">
              üë§ <strong><span id="nombreMostrado">-</span></strong>
            </div>
            <div class="info-item">
              ‚è±Ô∏è <span class="cronometro" id="cronometro">00:00</span>
            </div>
            <div class="info-item">
              üìç Encontradas:
              <strong
                ><span id="contadorPalabras">0</span>/<span id="totalPalabras"
                  >0</span
                ></strong
              >
            </div>
          </div>
          <div class="botones">
            <div class="info-seleccion">
              üìå Seleccionadas:
              <strong><span id="contadorSeleccion">0</span></strong>
            </div>
            <button
              class="btn-validar"
              onclick="validarSeleccion()"
              id="btnValidar"
              disabled
            >
              ‚úì Validar
            </button>
            <button
              class="btn-limpiar"
              onclick="limpiarSeleccion()"
              id="btnLimpiar"
              disabled
            >
              ‚úï Limpiar
            </button>
            <button class="btn-resolver" onclick="resolverJuego()">
              üîì Resolver
            </button>
            <button class="btn-nueva" onclick="iniciarNuevoJuego()">
              üîÑ Nuevo
            </button>
          </div>
        </div>

        <div id="mensaje" class="mensaje"></div>

        <div class="tablero-container">
          <div id="tablero" class="tablero"></div>
          <div id="listaPalabras" class="palabras-sidebar"></div>
        </div>
      </div>
    </div>

    <!-- Socket.IO cliente -->
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>

    <script>
      // ====== CONFIGURACI√ìN ======
      const socket = io();
      let juego = {
        tablero: [],
        palabras: [],
        palabrasEncontradas: [],
        palabrasCoord: {},
        seleccion: [],
        tiempoInicio: null,
        cronometroIntervalo: null,
      };

      const coloresPastelBonitos = [
  "#1F75FE", // Azul vibrante
  "#FFCA3A", // Amarillo dorado vivo
  "#4CAF50", // Verde brillante
  "#FF595E", // Rojo coral fuerte
  "#8C52FF", // Morado el√©ctrico
  "#00BBF9", // Azul celeste intenso
  "#F15BB5", // Rosa vibrante
  "#43AA8B", // Verde esmeralda suave
  "#F8961E", // Naranja c√°lido vibrante
  "#577590", // Azul acero moderno
  "#FF7F50", // Coral anaranjado vivo
  "#6A4C93"  // Morado profundo
];

function colorAleatorio() {
  return coloresPastelBonitos[
    Math.floor(Math.random() * coloresPastelBonitos.length)
  ];
}

      // ====== EVENTOS DE SOCKET ======

      socket.on("connect", () => {
        console.log("‚úÖ Conectado al servidor");
      });

      socket.on("juego_iniciado", (data) => {
        console.log("üéÆ Juego iniciado por servidor");
        juego.tablero = data.tablero;
        juego.palabras = data.palabras;
        juego.tiempoInicio = data.tiempoInicio;
        juego.palabrasEncontradas = [];
        juego.palabrasCoord = {};
        juego.seleccion = [];

        document.getElementById("pantallaInicio").style.display = "none";
        document.getElementById("pantallaJuego").style.display = "block";
        document.getElementById("nombreMostrado").textContent =
          document.getElementById("nombreJugador").value;
        document.getElementById("totalPalabras").textContent =
          juego.palabras.length;

        dibujarTablero();
        dibujarPalabras();
        iniciarCronometro();
        mostrarMensaje(
          "¬°Juego iniciado! Comienza a buscar palabras üéØ",
          "exito"
        );
      });

      /**
       * EVENTO: Palabra validada como correcta
       * ‚úÖ ESTO OCURRE CUANDO EL SERVIDOR CONFIRMA QUE LA PALABRA ES V√ÅLIDA
       */
      socket.on("palabra_valida", (data) => {
        if (!juego.colores) juego.colores = {};
        juego.colores[data.palabra] = colorAleatorio();

        console.log("‚úÖ Palabra v√°lida:", data.palabra);
        juego.palabrasEncontradas.push(data.palabra);

        // Guardar las coordenadas de esta palabra
        juego.palabrasCoord[data.palabra] = data.coordenadas;

        mostrarMensaje(
          `‚úÖ ¬°Encontraste: ${data.palabra.toUpperCase()}!`,
          "exito"
        );
        actualizarInterfaz();
        juego.seleccion = [];
        dibujarTablero();
        dibujarPalabras();
      });

      /**
       * EVENTO: La palabra no es v√°lida
       */
      socket.on("palabra_invalida", (data) => {
        console.log("‚ùå Palabra inv√°lida");
        mostrarMensaje("‚ùå No es una palabra v√°lida en la lista", "error");
        juego.seleccion = [];
        dibujarTablero();
      });

      /**
       * EVENTO: La palabra ya fue encontrada
       */
      socket.on("palabra_duplicada", (data) => {
        console.log("‚ö†Ô∏è Palabra duplicada");
        mostrarMensaje("‚ö†Ô∏è Ya encontraste esta palabra", "error");
        juego.seleccion = [];
        dibujarTablero();
      });

      /**
       * EVENTO: Soluciones del juego (cuando hace clic en Resolver)
       */
      // REEMPLAZAR con esto
socket.on("soluciones", (data) => {
  console.log("üîì Soluciones recibidas", data);

  // 1) Si el servidor env√≠a palabrasConColor, actualizamos juego.palabras
  //    (esto asegura que la lista de la derecha muestre texto + color)
  if (data.palabrasConColor && Array.isArray(data.palabrasConColor)) {
    juego.palabras = data.palabrasConColor.map(p => ({ texto: p.texto, color: p.color }));
  }

  // 2) Inicializamos/actualizamos el mapa de colores por palabra (keys en min√∫scula)
  if (!juego.colores) juego.colores = {};
  if (data.palabrasConColor && Array.isArray(data.palabrasConColor)) {
    data.palabrasConColor.forEach(p => {
      const key = String(p.texto).toLowerCase();
      juego.colores[key] = p.color;
    });
  }

  // 3) Procesar las soluciones (data.soluciones) y guardarlas en juego.palabrasCoord
  const soluciones = data.soluciones || {};
  for (const palabra in soluciones) {
    const coords = soluciones[palabra];
    if (coords && coords.length) {
      // usar la palabra tal como viene (en tu servidor las guardas en min√∫sculas)
      juego.palabrasCoord[palabra] = coords;

      // si no est√° en encontradas, agregarla
      if (!juego.palabrasEncontradas.includes(palabra)) {
        juego.palabrasEncontradas.push(palabra);
      }
    }
  }

  // 4) Actualizar UI
  actualizarInterfaz();
  dibujarTablero();
  dibujarPalabras();

  mostrarMensaje("‚úÖ ¬°Aqu√≠ est√°n todas las palabras y colores!", "exito");
});


      socket.on("error", (data) => {
        console.error("‚ùå Error del servidor:", data.mensaje);
        mostrarMensaje(`Error: ${data.mensaje}`, "error");
      });

      /**
       * EVENTO: El juego fue completado (todas las palabras encontradas)
       */
      socket.on("juego_completado", (data) => {
        console.log("üéâ ¬°JUEGO COMPLETADO!");
        mostrarMensaje(
          `üéâ ¬°FELICIDADES! Completaste el juego en ${Math.floor(
            data.tiempoTotal / 60
          )}:${String(data.tiempoTotal % 60).padStart(2, "0")}`,
          "exito"
        );

        // Detener el cron√≥metro
        clearInterval(juego.cronometroIntervalo);

        // Desactivar botones
        document.getElementById("btnValidar").disabled = true;
        document.getElementById("btnLimpiar").disabled = true;
      });

      // ====== FUNCIONES DE INTERFAZ ======

      function iniciarJuego() {
        const nombre = document.getElementById("nombreJugador").value.trim();
        if (!nombre) {
          alert("Por favor ingresa tu nombre");
          return;
        }

        // Leer la dificultad seleccionada
        const dificultad =
          document.getElementById("selectDificultad").value || "medio";

        console.log(
          "üì§ Enviando solicitud de iniciar juego:",
          nombre,
          dificultad
        );
        socket.emit("iniciar_juego", {
          nombre: nombre,
          dificultad: dificultad,
        });
      }

      function iniciarNuevoJuego() {
        if (confirm("¬øDeseas comenzar un nuevo juego?")) {
          location.reload();
        }
      }

      /**
       * FUNCI√ìN: Dibujar el tablero en HTML
       *
       * Para cada celda:
       * 1. Si est√° en una palabra encontrada ‚Üí VERDE
       * 2. Si est√° seleccionada actualmente ‚Üí AZUL
       * 3. Si no est√° en nada ‚Üí BLANCO
       */
      function dibujarTablero() {
        const contenedor = document.getElementById("tablero");
        contenedor.innerHTML = "";

        contenedor.style.gridTemplateColumns =
  `repeat(${juego.tablero.length}, 30px)`;


        for (let fila = 0; fila < juego.tablero.length; fila++) {
          for (let col = 0; col < juego.tablero[fila].length; col++) {
            const celda = document.createElement("div");
            celda.className = "celda";
            celda.textContent = juego.tablero[fila][col];
            celda.dataset.fila = fila;
            celda.dataset.col = col;

            // Si esta celda pertenece a una palabra encontrada
            const enEncontrada = verificarSiEstaEnPalabraEncontrada(fila, col);
            if (enEncontrada) {
              const palabraEntrante = obtenerPalabraDeCoordenada(fila, col);
              if (palabraEntrante && juego.colores[palabraEntrante]) {
                celda.style.backgroundColor = juego.colores[palabraEntrante];
                celda.style.color = "white";
                celda.style.borderColor = juego.colores[palabraEntrante];
              }
            } else {
              // Si NO est√° encontrada, verificar si est√° en selecci√≥n actual
              const enSeleccion = juego.seleccion.some(
                ([f, c]) => f === fila && c === col
              );
              if (enSeleccion) {
                celda.classList.add("seleccionada"); // ‚Üê AZUL
              }
            }

            // Evento de clic
            celda.addEventListener("click", () => {
              seleccionarCelda(fila, col);
            });

            contenedor.appendChild(celda);
          }
        }
      }
      function obtenerPalabraDeCoordenada(fila, col) {
  for (const palabra in juego.palabrasCoord) {
    for (const [f, c] of juego.palabrasCoord[palabra]) {
      if (f === fila && c === col) {
        return palabra;
      }
    }
  }
  return null;
}


      /**
       * FUNCI√ìN: Cuando el usuario hace clic en una celda
       *
       * L√≥gica:
       * - Si ya est√° seleccionada, deseleccionarla (clic nuevamente)
       * - Si es contigua a la √∫ltima, agregarla
       * - Si no es contigua, no permitir (mostrar error)
       */
      function seleccionarCelda(fila, col) {
        // No permitir seleccionar celdas que ya est√°n encontradas
        if (verificarSiEstaEnPalabraEncontrada(fila, col)) {
          mostrarMensaje(
            "‚ö†Ô∏è Esta celda ya est√° en una palabra encontrada",
            "error"
          );
          return;
        }

        if (juego.seleccion.length > 0) {
          const ultima = juego.seleccion[juego.seleccion.length - 1];

          // Si hace clic en la √∫ltima celda seleccionada, quitar del final
          if (ultima[0] === fila && ultima[1] === col) {
            juego.seleccion.pop();
            dibujarTablero();
            actualizarContadorSeleccion();
            return;
          }

          // Verificar si es contigua (distancia m√°xima de 1 en cualquier direcci√≥n)
          // Esto permite: ‚Üí, ‚Üì, ‚Üò, ‚Üê, ‚Üë, ‚Üô, etc
          const esContigua =
            Math.abs(ultima[0] - fila) <= 1 && Math.abs(ultima[1] - col) <= 1;

          if (!esContigua) {
            mostrarMensaje("‚ö†Ô∏è Las letras deben ser contiguas", "error");
            return;
          }

          // Verificar que no estemos seleccionando la misma celda
          const yaSeleccionada = juego.seleccion.some(
            ([f, c]) => f === fila && c === col
          );

          if (yaSeleccionada) {
            mostrarMensaje("‚ö†Ô∏è Ya seleccionaste esta celda", "error");
            return;
          }

          juego.seleccion.push([fila, col]);
        } else {
          juego.seleccion.push([fila, col]);
        }

        dibujarTablero();
        actualizarContadorSeleccion();
      }

      /**
       * FUNCI√ìN: VALIDAR LA PALABRA
       *
       * ‚úÖ ESTO ENV√çA LAS COORDENADAS AL SERVIDOR
       * El servidor valida si forman una palabra v√°lida
       */
      function validarSeleccion() {
        if (juego.seleccion.length === 0) {
          mostrarMensaje("Selecciona al menos una letra", "error");
          return;
        }

        console.log("üì§ Enviando palabra al servidor:", juego.seleccion);

        // üì° AQU√ç SE ENV√çA AL SERVIDOR
        socket.emit("validar_palabra", {
          coordenadas: juego.seleccion,
        });

        // Desactivar bot√≥n mientras espera respuesta
        document.getElementById("btnValidar").disabled = true;

        // Reactivar bot√≥n despu√©s de 1 segundo
        setTimeout(() => {
          document.getElementById("btnValidar").disabled =
            juego.seleccion.length === 0;
        }, 1000);
      }

      /**
       * FUNCI√ìN: Limpiar la selecci√≥n actual
       */
      function limpiarSeleccion() {
        juego.seleccion = [];
        actualizarContadorSeleccion();
        dibujarTablero();
        mostrarMensaje("‚úì Selecci√≥n limpiada", "exito");
      }

      /**
       * FUNCI√ìN: Actualizar el contador de letras seleccionadas
       * Tambi√©n habilita/deshabilita los botones
       */
      function actualizarContadorSeleccion() {
        const cantidad = juego.seleccion.length;
        document.getElementById("contadorSeleccion").textContent = cantidad;

        // Habilitar botones solo si hay selecci√≥n
        document.getElementById("btnValidar").disabled = cantidad === 0;
        document.getElementById("btnLimpiar").disabled = cantidad === 0;
      }

      function dibujarPalabras() {
  const contenedor = document.getElementById("listaPalabras");
  contenedor.innerHTML =
    '<div class="palabras-titulo">üìù Palabras a buscar:</div>';

  juego.palabras.forEach((p) => {
    const item = document.createElement("div");
    item.className = "palabra-item";

    // Si ya est√° encontrada, aplicar clase
    if (juego.palabrasEncontradas.includes(p.texto.toLowerCase())) {
      item.classList.add("encontrada");
    }

    // Mostrar texto y color asignado
    item.textContent = p.texto;
    item.style.color = p.color;

    contenedor.appendChild(item);
  });
}


      function actualizarInterfaz() {
        document.getElementById("contadorPalabras").textContent =
          juego.palabrasEncontradas.length;
      }

      function iniciarCronometro() {
        juego.cronometroIntervalo = setInterval(() => {
          const ahora = Date.now();
          const segundos = Math.floor((ahora - juego.tiempoInicio) / 1000);
          const minutos = Math.floor(segundos / 60);
          const segs = segundos % 60;

          document.getElementById("cronometro").textContent = `${String(
            minutos
          ).padStart(2, "0")}:${String(segs).padStart(2, "0")}`;
        }, 100);
      }

      function resolverJuego() {
        if (confirm("¬øSeguro que deseas ver la soluci√≥n?")) {
          socket.emit("resolver_juego");
          mostrarMensaje("üîì Mostrando todas las respuestas...", "exito");
        }
      }

      /**
       * FUNCI√ìN CLAVE: Verificar si una celda est√° en una palabra encontrada
       *
       * Recorre todas las palabras encontradas en juego.palabrasCoord
       * Si encuentra la celda [fila, col] en alguna palabra, retorna true
       */
      function verificarSiEstaEnPalabraEncontrada(fila, col) {
        if (!juego.palabrasCoord) {
          return false;
        }

        // Recorrer cada palabra encontrada
        for (const palabra in juego.palabrasCoord) {
          const coordenadas = juego.palabrasCoord[palabra];

          // Recorrer cada coordenada de esa palabra
          for (const [f, c] of coordenadas) {
            if (f === fila && c === col) {
              return true; // ‚úÖ Esta celda est√° en una palabra encontrada
            }
          }
        }
        return false; // ‚ùå Esta celda NO est√° en ninguna palabra
      }

      function mostrarSoluciones(soluciones) {
        console.log("üîì Mostrando soluciones:", soluciones);

        // Guardar todas las soluciones en juego.palabrasCoord
        for (const palabra in soluciones) {
          const coordenadas = soluciones[palabra];
          if (coordenadas) {
            juego.palabrasCoord[palabra] = coordenadas;
            if (!juego.palabrasEncontradas.includes(palabra)) {
              juego.palabrasEncontradas.push(palabra);
            }
          }
        }

        actualizarInterfaz();
        dibujarTablero();
        dibujarPalabras();
        mostrarMensaje(
          "‚úÖ ¬°Aqu√≠ est√°n todas las palabras! (en verde)",
          "exito"
        );
      }

      function mostrarMensaje(texto, tipo) {
        const elemento = document.getElementById("mensaje");
        elemento.textContent = texto;
        elemento.className = `mensaje ${tipo}`;
        elemento.style.display = "block";

        setTimeout(() => {
          elemento.style.display = "none";
        }, 3000);
      }

      // ===== Selecci√≥n de dificultad =====
document.querySelectorAll(".btn-dif").forEach(btn => {
  btn.addEventListener("click", () => {
    // Remover la clase activa
    document.querySelectorAll(".btn-dif").forEach(b => b.classList.remove("activa"));

    // Agregar la clase activa al bot√≥n actual
    btn.classList.add("activa");

    // Guardar dificultad seleccionada
    const dif = btn.getAttribute("data-dif");
    document.getElementById("selectDificultad").value = dif;

    console.log("üéö Dificultad seleccionada:", dif);
  });
});

    </script>
  </body>
</html>
